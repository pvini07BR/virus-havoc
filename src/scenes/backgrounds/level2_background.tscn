[gd_scene load_steps=21 format=2]

[ext_resource path="res://assets/images/backgroundElements/level2/1.png" type="Texture" id=1]
[ext_resource path="res://assets/images/backgroundElements/level2/13.png" type="Texture" id=2]
[ext_resource path="res://assets/images/backgroundElements/level2/3.png" type="Texture" id=3]
[ext_resource path="res://assets/images/backgroundElements/level2/4.png" type="Texture" id=4]
[ext_resource path="res://assets/images/backgroundElements/level2/5.png" type="Texture" id=5]
[ext_resource path="res://assets/images/backgroundElements/level2/6.png" type="Texture" id=6]
[ext_resource path="res://assets/images/backgroundElements/level2/7.png" type="Texture" id=7]
[ext_resource path="res://assets/images/backgroundElements/level2/8.png" type="Texture" id=8]
[ext_resource path="res://assets/images/backgroundElements/level2/9.png" type="Texture" id=9]
[ext_resource path="res://assets/images/backgroundElements/level2/10.png" type="Texture" id=10]
[ext_resource path="res://assets/images/backgroundElements/level2/11.png" type="Texture" id=11]
[ext_resource path="res://assets/images/backgroundElements/level2/background.png" type="Texture" id=12]
[ext_resource path="res://shaders/outline.tres" type="Material" id=13]
[ext_resource path="res://assets/images/backgroundElements/level2/12.png" type="Texture" id=14]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
render_mode unshaded;

uniform float Shift_Hue;

void fragment() {
// Input:3
	vec3 input_color;
	vec4 texture_color = texture(TEXTURE, UV);
	input_color = texture_color.rgb;

// VectorFunc:2
	vec3 color_hsv;
	{
		vec3 c = input_color;
		vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
		vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));
		vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));
		float d = q.x - min(q.w, q.y);
		float e = 1.0e-10;
		color_hsv=vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);
	}

	color_hsv.x = mod((color_hsv.x + Shift_Hue), 1.0f);

// VectorFunc:5
	vec3 color_rgb;
	{
		vec3 c = color_hsv;
		vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
		vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
		color_rgb=c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
	}

// Output:0
	texture_color = vec4(color_rgb.rgb,texture_color.a);
	COLOR.rgba = texture_color;

}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/Shift_Hue = 0.0

[sub_resource type="Shader" id=3]
code = "shader_type canvas_item;

uniform vec4 line_color : hint_color = vec4(1);
uniform float line_thickness : hint_range(0, 10) = 1.0;

void fragment() {
	vec2 size = TEXTURE_PIXEL_SIZE * line_thickness;
	
	float outline = texture(TEXTURE, UV + vec2(-size.x, 0)).a;
	outline += texture(TEXTURE, UV + vec2(0, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, 0)).a;
	outline += texture(TEXTURE, UV + vec2(0, -size.y)).a;
	outline += texture(TEXTURE, UV + vec2(-size.x, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, size.y)).a;
	outline += texture(TEXTURE, UV + vec2(-size.x, -size.y)).a;
	outline += texture(TEXTURE, UV + vec2(size.x, -size.y)).a;
	outline = min(outline, 1.0);
	
	vec4 color = texture(TEXTURE, UV);
	COLOR = mix(color, line_color, outline - color.a);
}"

[sub_resource type="ShaderMaterial" id=4]
shader = SubResource( 3 )
shader_param/line_color = Color( 1, 1, 1, 1 )
shader_param/line_thickness = 1.0

[sub_resource type="Animation" id=5]
length = 3.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("1:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 20 ), Vector2( 1280, 20 ) ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("2:position")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 60 ), Vector2( 0, 60 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("3:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 115 ), Vector2( 0, 115 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("4:position")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 170 ), Vector2( 1280, 170 ) ]
}
tracks/4/type = "value"
tracks/4/path = NodePath("5:position")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 240 ), Vector2( 0, 240 ) ]
}
tracks/5/type = "value"
tracks/5/path = NodePath("6:position")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 315 ), Vector2( 0, 315 ) ]
}
tracks/6/type = "value"
tracks/6/path = NodePath("7:position")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 390 ), Vector2( 1280, 390 ) ]
}
tracks/7/type = "value"
tracks/7/path = NodePath("11:position")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 680 ), Vector2( 0, 680 ) ]
}
tracks/8/type = "value"
tracks/8/path = NodePath("10:position")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 620 ), Vector2( 1280, 620 ) ]
}
tracks/9/type = "value"
tracks/9/path = NodePath("9:position")
tracks/9/interp = 1
tracks/9/loop_wrap = true
tracks/9/imported = false
tracks/9/enabled = true
tracks/9/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 0, 550 ), Vector2( 1280, 550 ) ]
}
tracks/10/type = "value"
tracks/10/path = NodePath("8:position")
tracks/10/interp = 1
tracks/10/loop_wrap = true
tracks/10/imported = false
tracks/10/enabled = true
tracks/10/keys = {
"times": PoolRealArray( 0, 3 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector2( 1280, 470 ), Vector2( 0, 470 ) ]
}

[sub_resource type="Animation" id=6]
length = 60.0
loop = true
tracks/0/type = "value"
tracks/0/path = NodePath("BG:material:shader_param/Shift_Hue")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 60 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 0.0, 1.0 ]
}

[node name="level2_background" type="Node2D"]

[node name="BG" type="TextureRect" parent="."]
material = SubResource( 2 )
margin_right = 3840.0
margin_bottom = 720.0
texture = ExtResource( 12 )
stretch_mode = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Node2D" type="Node2D" parent="."]
modulate = Color( 1, 1, 1, 0.392157 )
position = Vector2( 0, 329 )

[node name="1" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 0, 20 )
texture = ExtResource( 10 )
offset = Vector2( 0, 10 )

[node name="2" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 60 )
texture = ExtResource( 2 )

[node name="3" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 115 )
texture = ExtResource( 14 )

[node name="4" type="Sprite" parent="Node2D"]
material = SubResource( 4 )
position = Vector2( 0, 170 )
texture = ExtResource( 11 )

[node name="5" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 240 )
texture = ExtResource( 5 )

[node name="6" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 315 )
texture = ExtResource( 9 )

[node name="7" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 0, 390 )
texture = ExtResource( 8 )

[node name="8" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 470 )
texture = ExtResource( 8 )

[node name="9" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 0, 550 )
texture = ExtResource( 9 )

[node name="10" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 0, 620 )
texture = ExtResource( 10 )

[node name="11" type="Sprite" parent="Node2D"]
material = ExtResource( 13 )
position = Vector2( 1280, 680 )
texture = ExtResource( 11 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="Node2D"]
autoplay = "aaa"
playback_speed = 0.1
anims/aaa = SubResource( 5 )

[node name="1" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 0, 20 )
texture = ExtResource( 1 )
offset = Vector2( 0, 10 )

[node name="2" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 60 )
texture = ExtResource( 2 )

[node name="3" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 115 )
texture = ExtResource( 3 )

[node name="4" type="Sprite" parent="."]
material = SubResource( 4 )
position = Vector2( 0, 170 )
texture = ExtResource( 4 )

[node name="5" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 240 )
texture = ExtResource( 5 )

[node name="6" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 315 )
texture = ExtResource( 6 )

[node name="7" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 0, 390 )
texture = ExtResource( 7 )

[node name="8" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 470 )
texture = ExtResource( 8 )

[node name="9" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 0, 550 )
texture = ExtResource( 9 )

[node name="10" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 0, 620 )
texture = ExtResource( 10 )

[node name="11" type="Sprite" parent="."]
material = ExtResource( 13 )
position = Vector2( 1280, 680 )
texture = ExtResource( 11 )

[node name="cellsMoving" type="AnimationPlayer" parent="."]
autoplay = "aaa"
anims/aaa = SubResource( 5 )

[node name="backgroundMoving" type="AnimationPlayer" parent="."]
autoplay = "moving"
anims/moving = SubResource( 6 )
